<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:concordion="http://www.concordion.org/2007/concordion">
    <head>
        <title>Dvd Rental Store - Acceptance test</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    </head>
    <body>

        <h1>UNATTENDED PROGRAMMING EXERCISE
            DVD RENTAL STORE</h1>
        Contained within the test pack are five java files in <code>com.sky.dvdstore</code>:
        <ul>
            <li>Dvd.java</li>
            <li>DvdRepository.java</li>
            <li>DvdRepositoryStub.java</li>
            <li>DvdNotFoundException.java</li>
            <li>DvdService.java</li>
        </ul>

        The following DVDs are stored within a test repository [reference in brackets]:
        <table concordion:execute="#dvd = retrieveDvdFromRepository(#reference)">
            <tr>
                <th concordion:set="#reference">Reference</th>
                <th concordion:assertEquals="#dvd.title">Name</th>
                <th concordion:assertEquals="#dvd.description">Description</th>
            </tr>
            <tr>
                <td>DVD-TG423</td>
                <td>Topgun</td>
                <td>All action film</td>
            </tr>
            <tr>
                <td>DVD-DD878</td>
                <td>Dirty Dancing</td>
                <td>Nobody leaves baby in the corner</td>
            </tr>
            <tr>
                <td>DVD-S765</td>
                <td>Shrek</td>
                <td>Big green monsters, they're just all the rage these days, what with Hulk, 
                    Yoda, and that big ugly troll thingy out of the first Harry Potter movie. 
                    But Shrek, the flatulent swamp-dwelling ogre with a heart of gold 
                    (well, silver at least), is more than capable of rivalling any of them.</td>
            </tr>
        </table>

        <h2>Instructions</h2>
        You should try and spend no more than two hours on this problem.
        In this problem you are required to provide an implementation of the DvdService interface, a
        simple service that contains two methods.
        Any of the supplied files may be changed as you see fit. JavaDoc is not necessary.
        You may choose any means of accepting input and producing output, including the use of a
        test harness.

        <h2>Requirements</h2>
        Complete the implementation of the DvdService interface. The first part of the problem is to
        complete the following method:
        <p><code>
                retrieveDvd(String dvdReference) throws DvdNotFoundException
            </code></p>
        Unsurprisingly, it should retrieve a DVD by its reference. However, the method must also:
        <ul>
            <li>Ensure that the dvdReference is prefixed by ‘DVD-‘</li>
            <li>Throw a DvdNotFoundException where appropriate</li>
        </ul>

        For the second method:<br/>
        <p><code>
                getDvdSummary(String dvdReference) throws DvdNotFoundException
            </code></p>
        <br/>
        This method must
        <ul>
            <li>Ensure that the dvdReference is prefixed by ‘DVD-‘</li>
            <li>Throw a DvdNotFoundException where appropriate</li>
            <li>Provide a DVD summary that concatenates the reference, the title, and the first ten
                words of the review followed by ‘...’</li>
        </ul>

        <h2>Acceptance criteria</h2>
        <code>
            retrieveDvd(String dvdReference)
        </code>

        <div class="example">
            <table concordion:execute="#dvdTitle = retrieveDvdTitle(#dvdReference)">
                <tr>
                    <th concordion:set="#dvdReference">Input</th>
                    <th concordion:assertEquals="#dvdTitle">Expected Output</th>
                </tr>
                <tr>
                    <td>INVALID-TEXT</td>
                    <td>Exception: Invalid reference syntax, it should begin with DVD</td>
                </tr>
                <tr>
                    <td>DVD-999</td>
                    <td>Exception: The DVD was not found</td>
                </tr>
                <tr>
                    <td>DVD-TG423</td>
                    <td>Topgun</td>
                </tr>
            </table>
        </div>

        <code>
            getDvdSummary(String dvdReference)
        </code>

        <div class="example">
            <table concordion:execute="#dvdSummary = getDvdSummary(#dvdReference)">
                <tr>
                    <th concordion:set="#dvdReference">Input</th>
                    <th concordion:assertEquals="#dvdSummary">Expected output</th>
                </tr>
                <tr>
                    <td>INVALID-TEXT</td>
                    <td>Exception: Invalid reference syntax, it should begin with DVD</td>
                </tr>
                <tr>
                    <td>DVD-TG423</td>
                    <td>[DVD-TG423] Topgun - All action film</td>
                </tr>
                <tr>
                    <td>DVD-S765</td>
                    <td>[DVD-S765] Shrek - Big green monsters, they're just all the rage these days, 
                        what with Hulk, Yoda, and that big ugly troll thingy out of 
                        the first Harry Potter movie. 
                        But Shrek, the flatulent swamp-dwelling ogre with a heart of gold 
                        (well, silver at least), is more than capable of rivalling any of them.</td>
                </tr>
            </table>
        </div>
    </body>
</html>